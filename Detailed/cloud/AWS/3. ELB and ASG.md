
# Scalability & High Availability 🌐

## 🚀 Vertical Scalability 
- **Definition:** Increasing the size of an instance to handle more load.  
- **Example:**  
  - Current: Application runs on a `t2.micro`.  
  - Vertical Scaling: Upgrade to a `t2.large`.  
- **Use Case:** Suitable for monolithic applications.

---

## 📈 Horizontal Scalability 
- **Definition:** Increasing the number of instances/systems to distribute the load.  
- **Key Points:**  
  - Requires **distributed systems**.  
  - Commonly used for cloud-based architectures.  
  - Scales in/out by adding/removing instances.  

---

## 🌟 High Availability (HA) 
- **Overview:**  
  - Closely tied to horizontal scaling.  
  - Ensures the application/system is available across at least **two data centers (AZs)**.  
  - Can be **passive** (e.g., RDS Multi-AZ).  
- **Instance Range:**  
  - From `t2.nano` (0.5 GB RAM, 1 vCPU) to `u-12tb1.metal` (12.3 TB RAM, 448 vCPUs).  
- **Key Components:**  
  - **Auto Scaling Groups** 📊  
  - **Load Balancers** ⚖️  

---

## ⚖️ Load Balancers 
- **Purpose:** Forward traffic to multiple downstream servers (e.g., EC2 instances).  
- **Why Use Them?**  
  - Distribute load evenly 🛠️.  
  - Enable SSL termination for secure connections 🔒.  
  - Enforce session stickiness (cookies) 🍪.  
  - Support High Availability across zones.  

### 🟢 Elastic Load Balancer (ELB) 
- **Managed Load Balancer:** Simplifies maintenance and upgrades.  
- **Health Checks:**  
  - Ensures traffic is forwarded only to healthy instances.  
  - Crucial for maintaining availability and reliability.  

---

## 🔢 Types of Load Balancers in AWS 
### 1️⃣ Classic Load Balancer (CLB)  
- Introduced in **2009**, basic load balancing.  

### 2️⃣ Application Load Balancer (ALB)  
- Operates at **Layer 7 (HTTP/HTTPS)**.  
- Features:  
  - Supports HTTP/2, WebSockets, and redirects (HTTP → HTTPS).  
  - Advanced routing based on:  
    - **Path** (e.g., `/users`, `/posts`).  
    - **Query Strings/Headers** (e.g., `?platform=mobile`).  
  - Ideal for **microservices** and **containerized applications** (e.g., Docker, ECS).  
- **Headers:** Inserts client IP in `X-Forwarded-For`.  

### 3️⃣ Network Load Balancer (NLB)  
- Operates at **Layer 4 (TCP/UDP)**.  
- Features:  
  - Handles millions of requests/second ⚡.  
  - Ultra-low latency 🕒.  
  - Supports static IPs and Elastic IPs.  

### 4️⃣ Gateway Load Balancer (GWLB)  
- Purpose: Deploy and scale **third-party network appliances**.  
- Examples: Firewalls, Intrusion Detection/Prevention Systems.  

---

## 🍪 Stickiness (Session Affinity)  
- Ensures a client always connects to the same instance.  
- **Cookie Types:**  
  - **Application-Based Cookies:** Custom or generated by the application.  
  - **Duration-Based Cookies:** Generated by the load balancer (`AWSALB`, `AWSALBAPP`).  

---

## 🔁 Cross-Zone Load Balancing  
- **With Cross-Zone Load Balancing:**  
  - Requests are distributed evenly across all instances in all AZs.  
- **Without Cross-Zone Load Balancing:**  
  - Requests are restricted to instances in the same AZ as the load balancer.

---

## 🔒 SSL/TLS Basics 
- **Encryption in Transit:** Secures traffic between clients and load balancers.  
- **Certificates:**  
  - Issued by **Certificate Authorities (CAs)**.  
  - Have expiration dates requiring renewal.  

---

## 🕒 Connection Draining 
- **Purpose:** Allows "in-flight" requests to complete during instance deregistration/unhealthiness.  
- **Settings:**  
  - Adjustable between **1 to 3600 seconds** (default: 300 seconds).  

---

## ⚙️ Auto Scaling Groups (ASG) 
- **Overview:** Dynamically adjust the number of EC2 instances based on demand.  
- **Features:**  
  - Scale **out/in** to meet load.  
  - Automatically replace terminated instances.  
  - Integrates with load balancers.  

### 🚦 Scaling Policies  
1. **Dynamic Scaling:**  
   - Triggered by CloudWatch alarms (e.g., high CPU utilization).  
2. **Scheduled Scaling:**  
   - Automatically scales based on defined schedules.  
3. **Predictive Scaling:**  
   - Forecasts load and schedules scaling ahead of time.  

### 📊 Metrics for Scaling  
- **Good Metrics:**  
  - CPU Utilization.  
  - Request Count per Target.  
  - Average Network In/Out.  
  - Custom Metrics.  

---

## 🚀 Key Takeaways  
- **Horizontal Scaling:** Great for distributed systems and HA.  
- **Load Balancers:** Ensure even traffic distribution and SSL termination.  
- **ASG:** Dynamically scales resources to optimize cost and performance.  
- **SSL/TLS:** Vital for secure communication.  
- **Stickiness:** Helps maintain user sessions.  

--- 
